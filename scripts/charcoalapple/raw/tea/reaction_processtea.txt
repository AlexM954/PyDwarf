reaction_processtea_charcoalapple


--do multiple skills work?

-if withered shouldnt be rewitherable
WITHERED_LEAF_MAT

BRUISED_LEAF_MAT
BRUISED_LEAF_MAT:HEAVY
--shouldn't be further oxidizable?



Fixing requirements:
--[IS_UNFIXED]
if fixed, shouldn't be FIXED_LEAF_MAT:
WITHERED_LEAF_MAT:FIXED
WITHERED_LEAF_MAT:SEMIFIXED
BRUISED_LEAF_MAT:FIXED
GREEN_LEAF_MAT:FIXED


DRY_TEA_MAT:WHITE
DRY_TEA_MAT:GREEN
DRY_TEA_MAT:OOLONG //change to orange tea?
DRY_TEA_MAT:RED
DRY_TEA_MAT:FERMENTED

--if shaped shouldn't be reshapable
requirement:
--[REACTION_CLASS:UNSHAPED]
output
--[REACTION_CLASS:SHAPED]

TEA_SHAPE:TWIST
TEA_SHAPE:BALL
TEA_SHAPE:CAKE




add AUTOMATIC ?

100 leaves -> 50g ?

[OBJECT:REACTION]

--make require basket?
--small chance to find seeds when withering leaves

[REACTION:SUN_WITHER_TEA]
  [NAME:Dry leaves in the sun]
  [BUILDING:TEA_SUNDRYING_RACK]

  [REAGENT:picked leaves:100:PLANT_GROWTH:LEAVES:NONE:NONE]
      [HAS_MATERIAL_REACTION_PRODUCT:WITHERED_LEAF_MAT]
  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
      [EMPTY]
      [PRESERVE_REAGENT]
      [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:picked leaves:WITHERED_LEAF_MAT]
  //PRODUCT:100:50:GLOB:NONE:WITHERED_LEAF_MAT:NONE// -plant agnostic
  //PRODUCT:100:50:GLOB:NONE:WHITE_TEA:NONE// -plant agnostic


    [PRODUCT_TO_CONTAINER:bag]
  [PRODUCT:30:1:SEEDS:NONE:GET_MATERIAL_FROM_REAGENT:picked leaves:SEED_MAT]
    [PRODUCT_TO_CONTAINER:bag]
  [SKILL:PROCESSPLANTS]
  [SKILL:HERBALIST]



[REACTION:CHARCOAL_WITHER_TEA]
  [NAME:Dry leaves over charcoal]
  [BUILDING:TEA_DRYING_RACK]
  [REAGENT:picked leaves:100:PLANT_GROWTH:LEAVES:NONE:NONE]
    [HAS_MATERIAL_REACTION_PRODUCT:WITHERED_LEAF_MAT]

  [PRODUCT:90:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:picked leaves:WITHERED_LEAF_MAT]
  //PRODUCT:100:50:GLOB:NONE:WITHERED_LEAF_MAT:NONE// -plant agnostic
  //PRODUCT:100:50:GLOB:NONE:WHITE_TEA:NONE// -plant agnostic
    [PRODUCT_TO_CONTAINER:bag]
  [SKILL:FURNACE_OPERATOR]
  [FUEL]

.................................................

--nonfixed leaves?
50->50

// currently could turn oolong into more oolong, instead of into red?
[REACTION:BRUISE_TEA]
  [NAME:Roll leaves to oxidize them]
  [BUILDING:TEA_ROLLER]
  [REAGENT:leaves:50:GLOB:NONE:NONE:NONE]
    [HAS_MATERIAL_REACTION_PRODUCT:BRUISED_LEAF_MAT]

  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]

  [PRODUCT:100:50:GLOB:NONE:OOLONG_TEA:NONE]
  //PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:picked leaves:WITHERED_BRUISED_LEAF_MAT//
  //:BRUISED_LEAF_MAT
  //PRODUCT:100:50:GLOB:NONE:WITHERED_BRUISED_LEAF_MAT:NONE// -plant agnostic
  //// -plant agnostic

    [PRODUCT_TO_CONTAINER:bag]
    [IS_OXIDIZED]
  [SKILL:PROCESSPLANTS]

[REACTION:HEAVY_BRUISE_TEA]
  [NAME:Roll leaves to oxidize them]
  [BUILDING:TEA_ROLLER]
  [REAGENT:leaves:50:GLOB:NONE:NONE:NONE] --could limit to oolong here
    [HAS_MATERIAL_REACTION_PRODUCT:HEAVILY_BRUISED_LEAF_MAT]

  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:picked leaves:HEAVILY_BRUISED_LEAF_MAT]
  //PRODUCT:100:50:GLOB:NONE:HEAVILY_BRUISED_LEAF_MAT:NONE// -plant agnostic
  //PRODUCT:100:50:GLOB:NONE:RED_TEA:NONE// -plant agnostic

    [PRODUCT_TO_CONTAINER:bag]
    [IS_OXIDIZED]

.................................................

//needs a lot of attention
[REACTION:FIX_TEA] --killgreen
  [NAME:Use heat to fix green or oxidized leaves]
  [BUILDING:TEA_WOK]
  [REAGENT:leaves:50:GLOB:NONE:NONE:NONE]   --GLOB to prevent green going through this one
     [HAS_MATERIAL_REACTION_PRODUCT:FIXED_LEAF_MAT]
  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:FIXED_LEAF_MAT]
            //PASS through type
            //camellia:none -> camellia:fixed
            //so pass through everything except green?
  //requires leaves to have material teatype
    [PRODUCT_TO_CONTAINER:bag]
  [SKILL:COOK]

... might not be necessary, since all outputs are globs?
[REACTION:FIX_GREEN_TEA] --killgreen
  [NAME:Use heat to fix green leaves]
  [BUILDING:TEA_WOK]
  [REAGENT:picked leaves:100:PLANT_GROWTH:LEAVES:NONE:NONE]
     [HAS_MATERIAL_REACTION_PRODUCT:FIXED_LEAF_MAT]
  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:GLOB:NONE:GREEN_TEA:FIXED_LEAF_MAT]

  //PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:FIXED_LEAF_MAT//
  //PRODUCT:100:50:GLOB:NONE:GREEN_TEA:FIXED_LEAF_MAT//
    [PRODUCT_TO_CONTAINER:bag]
  [SKILL:COOK]

  //ignore
  !REACTION:STEAM_TEA!
    !NAME:Steam green leaves!
    !BUILDING:TEA_STEAMER!
    !REAGENT:leaves:50:GLOB:NONE:???:???]
    !REAGENT:bag:1:NONE:NONE:NONE:NONE]
         !CONTAINS:leaves]
         !PRESERVE_REAGENT]
         !DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
    !PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:STEAMED_LEAF_MAT]
      !PRODUCT_TO_CONTAINER:bag]
    !SKILL:COOK]

[REACTION:PARTIALLY_FIX_TEA]
  [NAME:Use light heat to partially fix leaves]]
  [BUILDING:TEA_WOK]
  [REAGENT:leaves:50:GLOB:NONE:NONE:WITHERED_LEAF_MAT]
  //REAGENT:leaves:50:GLOB:NONE:WITHERED_LEAF_MAT:NONE//
      {HAS_MATERIAL_REACTION_PRODUCT:fermentable}
  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:GLOB:NONE:FERMENTED_TEA:PARTIALLY_FIX_TEA_MAT]
  //PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:FERMENTED_LEAF_MAT//
    [PRODUCT_TO_CONTAINER:bag]
  [SKILL:COOK]

[REACTION:PILE_TEA]
  [NAME:Pile leaves for fermentation]
  [BUILDING:TEA_PILES]
  [REAGENT:leaves:500:GLOB:NONE:NONE:WITHERED_LEAF_MAT] -- has to process large batches at a time
      {HAS_MATERIAL_REACTION_PRODUCT:fermentable}
  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:500:GLOB:NONE:PILE_FERMENTED_TEA:PILE_FERMENTED_TEA_MAT]
  //PRODUCT:100:500:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:DRY_PILE_FERMENTED_LEAF_MAT//
  //PRODUCT:100:50:GLOB:NONE:PILE_FERMENTED_TEA:NONE//

    [PRODUCT_TO_CONTAINER:bag]
  [SKILL:HERBALIST]

  .................................................


[REACTION:TWIST_TEA] --for now hand-roll
  [NAME:Twist leaves]
  [BUILDING:TEA_TWISTER]
  [REAGENT:leaves:50:GLOB:NONE:NONE:NONE]
      [HAS_MATERIAL_REACTION_PRODUCT:TWISTED_TEA_MAT]
  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:TWISTED_TEA_MAT]
  //PRODUCT:100:50:{TWIST}:{NONE}:GET_MATERIAL_FROM_REAGENT:leaves:TWISTED_TEA_MAT//

    [PRODUCT_TO_CONTAINER:bag]
    [TEA_SHAPE:TWISTED]

  [SKILL:PROCESSPLANTS]


[REACTION:BALL_ROLL_TEA]
  [NAME:Roll leaves into balls]
  [BUILDING:TEA_ROLLER]
  [REAGENT:leaves:50:GLOB:NONE:NONE:NONE]
      [HAS_MATERIAL_REACTION_PRODUCT:ROLLED_TEA_MAT] /

  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:ROLLED_TEA_MAT]
  //PRODUCT:100:50:BALL:NONE:GET_MATERIAL_FROM_REAGENT:leaves:DRY_TEA_MAT//
  //PRODUCT:100:50:PLANT_GROWTH:TEA_BALL:GET_MATERIAL_FROM_REAGENT:leaves:DRY_TEA_MAT//
    [PRODUCT_TO_CONTAINER:bag]
    [TEA_SHAPE:BALL]
  [SKILL:PROCESSPLANTS]

[REACTION:PRESS_TEA]
  [NAME:Press tea leaves into cakes/discs]
  [BUILDING:TEA_PRESS]
  [REAGENT:tea leaves:357:GLOB:NONE:???:FERMENTED_LEAF_MAT]   -357/360g cake
        [HAS_MATERIAL_REACTION_PRODUCT:CAKE_TEA_MAT]
  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]

  [PRODUCT:100:1:BAR:NONE:GET_MATERIAL_FROM_REAGENT:leaves:CAKE_TEA_MAT]
    [PRODUCT_DIMENSION:50][PRODUCT_PRESSED]
    [TEA_SHAPE:CAKE]

  [SKILL:PRESSER]
  [AUTOMATIC]

[REACTION:PRESS_TEA_BAR]
    [NAME:Press tea leaves into bars]
    [BUILDING:TEA_PRESS]
    [REAGENT:tea leaves:357:GLOB:NONE:???:FERMENTED_LEAF_MAT]   -357/360g cake
         [HAS_MATERIAL_REACTION_PRODUCT:BAR_TEA_MAT]
    [REAGENT:bag:1:NONE:NONE:NONE:NONE]
         [CONTAINS:leaves]
         [PRESERVE_REAGENT]
         [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]

    [PRODUCT:100:1:BAR:NONE:GET_MATERIAL_FROM_REAGENT:leaves:BAR_TEA_MAT]
      [PRODUCT_DIMENSION:50][PRODUCT_PRESSED]
      [PRODUCT_TO_CONTAINER:bag]
    [SKILL:PRESSER]
    [AUTOMATIC]

.................................................

{MILLING} dwarves make {leaf powder} from {plant leaf, bag} at a {quern}

[REACTION:MILL_LEAF_TO_POWDER]
  [NAME:Make powder from leaves]
  [BUILDING:QUERN:CUSTOM_T]
  [BUILDING:MILLSTONE:CUSTOM_T]
  [REAGENT:plant_leaf:100:PLANT_GROWTH:LEAVES:NONE:NONE]
      [HAS_MATERIAL_REACTION_PRODUCT:MILL_PLANT_PART_POWDER] //needs to be millable
  [REAGENT:bag:1:BOX:NONE:NONE:NONE]
      [EMPTY]
      [BAG]
      [PRESERVE_REAGENT]
      [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]
  [PRODUCT:100:50:POWDER_MISC:NONE:GET_MATERIAL_FROM_REAGENT:plant_leaf:NONE]
    [PRODUCT_TO_CONTAINER:bag]

  # 10 leaves -> 5g of tea?
  [SKILL:MILLING]


[REACTION:ROAST_TEA]
  [NAME:Roast finished tea]
  [BUILDING:TEA_ROASTER]
  [REAGENT:leaves:50:GLOB:NONE:???:???]

  [REAGENT:bag:1:NONE:NONE:NONE:NONE]
       [CONTAINS:leaves]
       [PRESERVE_REAGENT]
       [DOES_NOT_DETERMINE_PRODUCT_AMOUNT]

  [PRODUCT:100:50:GLOB:NONE:GET_MATERIAL_FROM_REAGENT:leaves:ROASTED_TEA_MAT]
    [PRODUCT_TO_CONTAINER:bag]
  [SKILL:FURNACE_OPERATOR] --wood burner?
  [FUEL]


......................................................



[REACTION:TEMPLATE]
  [NAME:]
  [BUILDING:]
  [REAGENT:]
  [PRODUCT:]
  [SKILL:]
